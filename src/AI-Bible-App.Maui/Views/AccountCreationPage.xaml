<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:AI_Bible_App.Maui.ViewModels"
             x:Class="AI_Bible_App.Maui.Views.AccountCreationPage"
             x:DataType="viewmodels:AccountCreationViewModel"
             Title="Create Account"
             Shell.NavBarIsVisible="False"
             Shell.TabBarIsVisible="False"
             Shell.FlyoutBehavior="Disabled">
    
    <Grid>
        <!-- Background gradient -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#1A0A2E" Offset="0.0"/>
                <GradientStop Color="#2D1B4E" Offset="0.5"/>
                <GradientStop Color="#1A0A2E" Offset="1.0"/>
            </LinearGradientBrush>
        </Grid.Background>
        
        <ScrollView>
            <Grid RowDefinitions="Auto,*,Auto" Padding="32,60,32,40">
                
                <!-- Header -->
                <VerticalStackLayout Grid.Row="0" Spacing="16" Padding="0,0,0,40">
                    
                    <!-- Back button -->
                    <Button Text="← Back"
                            Command="{Binding GoBackCommand}"
                            BackgroundColor="Transparent"
                            TextColor="#A78BFA"
                            FontSize="14"
                            HorizontalOptions="Start"
                            Padding="0"/>
                    
                    <!-- Animated glow effect behind icon -->
                    <Border WidthRequest="80" HeightRequest="80"
                            StrokeShape="RoundRectangle 40"
                            StrokeThickness="0"
                            HorizontalOptions="Center"
                            Margin="0,10,0,0">
                        <Border.Background>
                            <RadialGradientBrush>
                                <GradientStop Color="#8B5CF6" Offset="0.0"/>
                                <GradientStop Color="Transparent" Offset="1.0"/>
                            </RadialGradientBrush>
                        </Border.Background>
                        <Label Text="✨" 
                               FontSize="36" 
                               HorizontalOptions="Center"
                               VerticalOptions="Center"/>
                    </Border>
                    
                    <!-- Welcome Text -->
                    <Label Text="{Binding WelcomeMessage}" 
                           FontSize="28" 
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           TextColor="White"/>
                    
                    <Label Text="{Binding WelcomeSubtitle}" 
                           FontSize="16" 
                           HorizontalOptions="Center"
                           TextColor="#A78BFA"/>
                </VerticalStackLayout>
                
                <!-- Sign Up Buttons -->
                <VerticalStackLayout Grid.Row="1" Spacing="16" VerticalOptions="Center">
                    
                    <!-- Continue with Google -->
                    <Button Text="Continue with Google"
                            Command="{Binding SignInWithGoogleCommand}"
                            IsEnabled="{Binding IsNotBusy}"
                            BackgroundColor="White"
                            TextColor="#1F2937"
                            FontSize="16"
                            FontAttributes="Bold"
                            HeightRequest="56"
                            CornerRadius="28"
                            Padding="24,0">
                        <Button.ImageSource>
                            <FontImageSource Glyph="G" 
                                             FontFamily="Arial" 
                                             Color="#4285F4"
                                             Size="20"/>
                        </Button.ImageSource>
                    </Button>
                    
                    <!-- Continue with Apple -->
                    <Button Text="Continue with Apple"
                            Command="{Binding SignInWithAppleCommand}"
                            IsEnabled="{Binding IsNotBusy}"
                            BackgroundColor="White"
                            TextColor="#1F2937"
                            FontSize="16"
                            FontAttributes="Bold"
                            HeightRequest="56"
                            CornerRadius="28"
                            Padding="24,0">
                        <Button.ImageSource>
                            <FontImageSource Glyph="" 
                                             FontFamily="Arial" 
                                             Color="#000000"
                                             Size="20"/>
                        </Button.ImageSource>
                    </Button>
                    
                    <!-- Divider -->
                    <Grid ColumnDefinitions="*,Auto,*" Padding="0,8">
                        <BoxView Grid.Column="0" HeightRequest="1" 
                                 Color="#4C1D95" VerticalOptions="Center"/>
                        <Label Grid.Column="1" Text="or" 
                               TextColor="#7C3AED" 
                               FontSize="14"
                               Margin="16,0"/>
                        <BoxView Grid.Column="2" HeightRequest="1" 
                                 Color="#4C1D95" VerticalOptions="Center"/>
                    </Grid>
                    
                    <!-- Sign Up with Email -->
                    <Button Text="Sign Up with Email"
                            Command="{Binding ShowEmailSignUpCommand}"
                            IsEnabled="{Binding IsNotBusy}"
                            BackgroundColor="#7C3AED"
                            TextColor="White"
                            FontSize="16"
                            FontAttributes="Bold"
                            HeightRequest="56"
                            CornerRadius="28"/>
                    
                    <!-- Stay Logged In Toggle -->
                    <Border StrokeShape="RoundRectangle 12"
                            BackgroundColor="#2D1B4E"
                            Stroke="#4C1D95"
                            StrokeThickness="1"
                            Padding="16"
                            Margin="0,8,0,0">
                        <Grid ColumnDefinitions="*,Auto">
                            <VerticalStackLayout Grid.Column="0" Spacing="2">
                                <Label Text="Stay logged in"
                                       FontSize="16"
                                       TextColor="White"/>
                                <Label Text="Skip login screen on next launch"
                                       FontSize="12"
                                       TextColor="#A78BFA"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="1"
                                    IsToggled="{Binding StayLoggedIn}"
                                    OnColor="#8B5CF6"
                                    ThumbColor="White"/>
                        </Grid>
                    </Border>
                    
                    <!-- Continue as Guest -->
                    <Button Text="Continue as Guest"
                            Command="{Binding ContinueAsGuestCommand}"
                            IsEnabled="{Binding IsNotBusy}"
                            BackgroundColor="Transparent"
                            TextColor="#A78BFA"
                            FontSize="14"
                            HeightRequest="44"
                            Margin="0,8,0,0"/>
                    
                    <!-- Loading indicator -->
                    <ActivityIndicator IsRunning="{Binding IsBusy}"
                                       IsVisible="{Binding IsBusy}"
                                       Color="#A78BFA"
                                       HeightRequest="30"
                                       HorizontalOptions="Center"/>
                    
                    <!-- Error message -->
                    <Border IsVisible="{Binding HasError}"
                            BackgroundColor="#7F1D1D"
                            StrokeShape="RoundRectangle 12"
                            StrokeThickness="0"
                            Padding="16">
                        <Label Text="{Binding ErrorMessage}"
                               TextColor="#FCA5A5"
                               FontSize="14"
                               HorizontalTextAlignment="Center"/>
                    </Border>
                </VerticalStackLayout>
                
                <!-- Footer -->
                <VerticalStackLayout Grid.Row="2" Spacing="8" Padding="0,20,0,0">
                    <Label Text="By creating an account, your conversations,&#x0a;reflections, and prayers are synced across devices."
                           FontSize="12"
                           TextColor="#6B7280"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center"/>
                </VerticalStackLayout>
                
            </Grid>
        </ScrollView>
    </Grid>
</ContentPage>
